<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>DebtFree</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">
<link rel="apple-touch-icon" href="icon-192.png">

<script src="https://cdn.tailwindcss.com"></script>

<style>
body { font-family: sans-serif; background:#0f172a; margin:0; color:white; }
.card { background:#1e293b; padding:20px; border-radius:20px; margin:20px; }
input { width:100%; padding:12px; border-radius:12px; border:none; margin-top:8px; font-size:16px;}
button { padding:12px 18px; border-radius:12px; border:none; cursor:pointer; font-weight:bold;}
.primary { background:linear-gradient(135deg,#22d3ee,#34d399); color:black;}
.danger { background:#111827; color:white;}
h1 { text-align:center; padding:20px; font-size:28px; font-weight:bold;}
.balance { font-size:32px; font-weight:bold; margin-top:10px;}
</style>
</head>

<body>

<h1>DebtFree</h1>

<div class="card">
<h3>รายรับ</h3>
<input type="number" id="income" placeholder="กรอกเงินเดือน" oninput="save()">
</div>

<div class="card">
<h3>รายจ่าย</h3>
<input type="number" id="expense" placeholder="กรอกรายจ่ายรวม" oninput="save()">
</div>

<div class="card">
<h3>คงเหลือสุทธิ</h3>
<div id="balance" class="balance">0</div>
</div>

<div style="text-align:center; margin:20px;">
<button class="danger" onclick="resetApp()">RESET</button>
</div>

<script>
function save(){
  const income = parseFloat(document.getElementById('income').value)||0;
  const expense = parseFloat(document.getElementById('expense').value)||0;
  const balance = income - expense;
  document.getElementById('balance').innerText = balance.toLocaleString();
  localStorage.setItem("debtData", JSON.stringify({income, expense}));
}

function load(){
  const data = JSON.parse(localStorage.getItem("debtData")||"{}");
  if(data.income) document.getElementById('income').value = data.income;
  if(data.expense) document.getElementById('expense').value = data.expense;
  save();
}

function resetApp(){
  if(confirm("ลบข้อมูลทั้งหมด?")){
    localStorage.clear();
    location.reload();
  }
}

if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("sw.js");
  });
}

load();
</script>

</body>
</html>
